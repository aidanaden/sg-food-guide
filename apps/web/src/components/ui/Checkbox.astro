---
interface Props {
  id?: string;
  label?: string;
  class?: string;
  labelClass?: string;
  inputClass?: string;
  controlClass?: string;
  disabled?: boolean;
  [key: string]: any;
}

const {
  id,
  label,
  class: className,
  labelClass,
  inputClass,
  controlClass,
  disabled = false,
  ...rest
} = Astro.props;
---

<label
  class:list={[
    'inline-flex items-center gap-2 text-xs text-ink-muted select-none',
    disabled ? 'cursor-not-allowed opacity-60' : 'cursor-pointer',
    className,
  ]}
  data-ui="checkbox"
>
  <input
    id={id}
    type="checkbox"
    class:list={[
      'peer sr-only',
      inputClass,
    ]}
    disabled={disabled}
    {...rest}
  />
  <span
    class:list={[
      'inline-flex h-4 w-4 shrink-0 items-center justify-center rounded border border-warm-600/60 bg-surface-raised',
      'text-transparent transition-colors',
      'peer-checked:border-flame-500/60 peer-checked:bg-flame-500/20 peer-checked:text-flame-400',
      'peer-focus-visible:outline-none peer-focus-visible:ring-1 peer-focus-visible:ring-flame-500/40',
      controlClass,
    ]}
    aria-hidden="true"
  >
    <span class="i-ph-check text-xs leading-none" />
  </span>
  {label ? (
    <span class:list={['leading-none', labelClass]}>{label}</span>
  ) : (
    <span class:list={['inline-flex items-center gap-1.5 leading-none', labelClass]}>
      <slot />
    </span>
  )}
</label>
