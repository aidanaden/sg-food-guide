---
import { cn } from "../utils";

interface Props {
  id?: string;
  name?: string;
  checked?: boolean;
  disabled?: boolean;
  value?: string;
  size?: "sm" | "default";
  class?: string;
  label?: string;
  [key: string]: any;
}

const {
  id,
  name,
  checked = false,
  disabled = false,
  value,
  size = "default",
  class: className,
  label,
  ...attrs
} = Astro.props as Props;

const trackSize = size === "sm" ? "h-3.5 w-6" : "h-4.5 w-8";
const thumbSize = size === "sm" ? "h-3 w-3" : "h-4 w-4";
const translateClass = size === "sm" ? "peer-checked:translate-x-2.5" : "peer-checked:translate-x-3.5";
---

<label
  data-slot="switch"
  class={cn("inline-flex items-center gap-2", disabled ? "opacity-60" : undefined, className)}
>
  <input
    id={id}
    name={name}
    value={value}
    type="checkbox"
    class="peer sr-only"
    checked={checked}
    disabled={disabled}
    {...attrs}
  />
  <span
    class={cn(
      "bg-gray-5 relative inline-flex items-center rounded-full border border-transparent transition-colors peer-focus-visible:ring-2 peer-focus-visible:ring-ring/50 peer-checked:bg-primary peer-disabled:cursor-not-allowed",
      trackSize,
    )}
    aria-hidden="true"
  >
    <span
      class={cn(
        "bg-background absolute left-0 inline-block rounded-full transition-transform",
        thumbSize,
        translateClass,
      )}
    />
  </span>
  {label != null && <span class="text-sm leading-none">{label}</span>}
</label>
