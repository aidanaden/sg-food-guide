---
import type { HTMLAttributes } from "astro/types";
import { cn } from "../utils";

interface Props extends HTMLAttributes<"button"> {
  href?: string;
  variant?:
    | "default"
    | "outline"
    | "secondary"
    | "ghost"
    | "destructive-solid"
    | "destructive-ghost"
    | "link";
  size?: "default" | "xs" | "sm" | "lg" | "icon" | "icon-xs" | "icon-sm" | "icon-lg";
}

const {
  href,
  variant = "default",
  size = "default",
  class: className,
  ...attrs
} = Astro.props;

const Tag = href != null ? "a" : "button";

const variantClasses = {
  default: "bg-primary text-primary-foreground hover:bg-primary/85",
  outline: "border-border bg-background text-foreground hover:bg-muted",
  secondary: "bg-muted text-foreground hover:bg-muted/80",
  ghost: "text-foreground hover:bg-muted",
  "destructive-solid": "bg-destructive text-destructive-foreground hover:bg-destructive/90",
  "destructive-ghost": "bg-destructive/15 text-destructive hover:bg-destructive/25",
  link: "text-primary underline-offset-4 hover:underline",
} as const;

const sizeClasses = {
  default: "h-8 min-h-11 gap-1.5 px-2.5 text-sm sm:min-h-8",
  xs: "h-6 min-h-11 gap-1 px-2 text-xs sm:min-h-6",
  sm: "h-7 min-h-11 gap-1 px-2.5 text-xs sm:min-h-7",
  lg: "h-9 min-h-11 gap-1.5 px-2.5 text-sm sm:min-h-9",
  icon: "size-8 min-h-11 min-w-11 sm:min-h-8 sm:min-w-8",
  "icon-xs": "size-6 min-h-11 min-w-11 sm:min-h-6 sm:min-w-6",
  "icon-sm": "size-7 min-h-11 min-w-11 sm:min-h-7 sm:min-w-7",
  "icon-lg": "size-9 min-h-11 min-w-11 sm:min-h-9 sm:min-w-9",
} as const;
---

<Tag
  href={href}
  data-slot="button"
  class={cn(
    "inline-flex shrink-0 items-center justify-center rounded-lg border border-transparent text-sm font-medium whitespace-nowrap transition-all outline-none disabled:pointer-events-none disabled:opacity-50",
    variantClasses[variant],
    sizeClasses[size],
    className,
  )}
  {...attrs}
>
  <slot />
</Tag>
