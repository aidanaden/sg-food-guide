---
import { cn } from "../utils";

interface Props {
  title?: string;
  description?: string;
  class?: string;
  heightRem?: number;
  [key: string]: any;
}

const {
  title,
  description,
  class: className,
  heightRem = 20,
  ...attrs
} = Astro.props as Props;

const panelHeight = `${heightRem}rem`;
---

<section
  data-slot="chart-container"
  class={cn("bg-surface ring-border text-foreground flex flex-col gap-3 rounded-xl p-4 ring-1", className)}
  {...attrs}
>
  {(title != null || description != null || Astro.slots.has("actions")) && (
    <header class="flex items-start justify-between gap-2">
      <div class="min-w-0">
        {title != null && <h3 class="text-sm font-medium">{title}</h3>}
        {description != null && <p class="text-foreground-muted mt-0.5 text-xs">{description}</p>}
      </div>
      {Astro.slots.has("actions") && <div class="shrink-0"><slot name="actions" /></div>}
    </header>
  )}

  <div data-slot="chart-surface" class="w-full" style={`min-height: ${panelHeight};`}>
    <slot />
  </div>

  {Astro.slots.has("footer") && <footer class="text-foreground-muted text-xs"><slot name="footer" /></footer>}
</section>
