---
import { cn } from "../utils";

interface Bin {
  label: string;
  value: number;
}

interface Props {
  bins?: Bin[];
  class?: string;
  [key: string]: any;
}

const {
  bins = [
    { label: "0-10", value: 3 },
    { label: "10-20", value: 8 },
    { label: "20-30", value: 14 },
    { label: "30-40", value: 10 },
    { label: "40-50", value: 5 },
  ],
  class: className,
  ...attrs
} = Astro.props as Props;

const max = Math.max(...bins.map((bin) => bin.value), 1);
---

<div data-slot="distribution-chart" class={cn("w-full", className)} {...attrs}>
  <div class="flex h-40 items-end gap-1.5">
    {bins.map((bin) => (
      <div class="flex min-w-0 flex-1 flex-col items-center gap-1">
        <div
          class="bg-primary/60 border-border w-full rounded-t border"
          style={`height: ${(bin.value / max) * 100}%;`}
          title={`${bin.label}: ${bin.value}`}
        />
        <span class="text-foreground-muted text-xs">{bin.label}</span>
      </div>
    ))}
  </div>
</div>
